{"version":3,"sources":["../../../widgets/Xunta/Widget.js"],"names":["define","declare","BaseWidget","on","dom","lang","QueryTask","Query","SpatialReference","Graphic","SimpleFillSymbol","FeatureSet","baseClass","postCreate","inherited","arguments","console","log","cargaConcellos","codigoprovincia","selectProvincia","value","selectConcellos","innerHTML","myquerytask","config","serviceUrlconcellos","myquery","returnGeometry","outFields","orderByFields","where","execute","hitch","result","opcion","document","createElement","text","add","i","features","length","opcion2","attributes","CODCONC","CONCELLO","cargaParroquias","codigoconcello","selectParroquias","myquerytask2","serviceUrlparroquias","myquery2","resultado","opciones","opcion3","CODPARRO","PARROQUIA","zoomConcello","myquerytaskC","zoomC","outSpatialReference","evt","myconcello","geometry","simbolo","grafico","map","graphics","setExtent","getExtent","zoomParroquia","codigoparroquia","myquerytaskP","zoomP","evt1","myparroquia","simbolop","grafico2"],"mappings":"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","file":"Widget.js","sourcesContent":["\r\n\r\ndefine(['dojo/_base/declare', 'jimu/BaseWidget', 'dojo/on', 'dojo/dom', 'dojo/_base/lang', 'esri/tasks/QueryTask', 'esri/tasks/query', 'esri/SpatialReference', 'esri/graphic','esri/symbols/SimpleFillSymbol', 'esri/tasks/FeatureSet'],\r\nfunction(declare, BaseWidget, on, dom, lang, QueryTask, Query, SpatialReference, Graphic, SimpleFillSymbol, FeatureSet) {\r\n  //To create a widget, you need to derive from BaseWidget.\r\n  return declare([BaseWidget], {\r\n\r\n    // Custom widget code goes here\r\n\r\n    baseClass: 'xunta',\r\n    // this property is set by the framework when widget is loaded.\r\n    // name: 'Xunta',\r\n    // add additional properties here\r\n\r\n    //methods to communication with app container:\r\n    postCreate: function() {\r\n      this.inherited(arguments);\r\n      console.log('Xunta::postCreate');\r\n    },\r\n\r\n    cargaConcellos: function(){\r\n\r\n      var codigoprovincia = this.selectProvincia.value;\r\n      console.log(codigoprovincia);\r\n      if (codigoprovincia == -1) return;\r\n\r\n      this.selectConcellos.innerHTML = \"\";\r\n\r\n      var myquerytask = new QueryTask (this.config.serviceUrlconcellos);\r\n      console.log(myquerytask);\r\n\r\n      var myquery = new Query ();\r\n      myquery.returnGeometry = false;\r\n      myquery.outFields = [\"CODCONC\", \"CONCELLO\"];\r\n      myquery.orderByFields = [\"CONCELLO\"];\r\n      myquery.where = \"CODPROV = \" + codigoprovincia;\r\n\r\n      console.log(myquery);\r\n\r\n      myquerytask.execute(myquery, lang.hitch(this, function(result){\r\n        console.log(result)\r\n\r\n        var opcion = document.createElement(\"option\");\r\n        opcion.value = -1;\r\n        opcion.text = \"Seleccione Concello\";\r\n        this.selectConcellos.add(opcion);\r\n\r\n        for ( let i = 0; i<result.features.length; i++){\r\n          opcion2 = document.createElement(\"option\");\r\n          console.log(opcion2);\r\n          opcion2.value = result.features[i].attributes.CODCONC;\r\n          opcion2.text = result.features[i].attributes.CONCELLO;\r\n          this.selectConcellos.add(opcion2);\r\n        };\r\n\r\n      }));\r\n    },\r\n\r\n    cargaParroquias(){\r\n\r\n      var codigoconcello = this.selectConcellos.value;\r\n      console.log(codigoconcello);\r\n\r\n      this.selectParroquias.innerHTML = \"\";\r\n\r\n      var myquerytask2 = new QueryTask (this.config.serviceUrlparroquias);\r\n      console.log(myquerytask2);\r\n\r\n      var myquery2 = new Query ();\r\n      myquery2.returnGeometry = false;\r\n      myquery2.outFields = [\"CODPARRO\", \"PARROQUIA\"];\r\n      myquery2.orderByFields = [\"PARROQUIA\"];\r\n      myquery2.where = \"CODCONC = \" + codigoconcello;\r\n\r\n      console.log(myquery2);\r\n\r\n      myquerytask2.execute(myquery2, lang.hitch(this, function(resultado){\r\n        console.log(resultado)\r\n\r\n        var opciones = document.createElement(\"option\");\r\n        opciones.text = \"Seleccione Concello\";\r\n        this.selectConcellos.add(opciones);\r\n\r\n        for ( let i = 0; i<resultado.features.length; i++){\r\n          opcion3 = document.createElement(\"option\");\r\n          console.log(opcion3);\r\n          opcion3.value = resultado.features[i].attributes.CODPARRO;\r\n          opcion3.text = resultado.features[i].attributes.PARROQUIA;\r\n          this.selectParroquias.add(opcion3);\r\n        };\r\n\r\n      }));\r\n\r\n    },\r\n\r\n    zoomConcello(){\r\n\r\n      var codigoconcello = this.selectConcellos.value;\r\n\r\n      var myquerytaskC = new QueryTask (this.config.serviceUrlconcellos);\r\n\r\n      var zoomC = new Query ();\r\n      zoomC.returnGeometry = true;\r\n      zoomC.where = \"CODCONC = \" + codigoconcello;\r\n      zoomC.outSpatialReference = new SpatialReference(102100);\r\n\r\n      myquerytaskC.execute(zoomC, lang.hitch(this, function(evt){\r\n\r\n        console.log(evt);\r\n\r\n        if (evt.features.length >0){\r\n\r\n          var myconcello = evt.features[0].geometry;\r\n\r\n          var simbolo = new SimpleFillSymbol();\r\n\r\n          var grafico = new Graphic(myconcello, simbolo);\r\n          // this.map.graphics.clear();\r\n          this.map.graphics.add(grafico);\r\n          this.map.setExtent(myconcello.getExtent(), true);\r\n\r\n        }\r\n\r\n      }))\r\n    },\r\n\r\n    zoomParroquia(){\r\n\r\n      var codigoparroquia = this.selectParroquias.value;\r\n\r\n      var myquerytaskP = new QueryTask (this.config.serviceUrlparroquias);\r\n\r\n      var zoomP = new Query ();\r\n      zoomP.returnGeometry = true;\r\n      zoomP.where = \"CODPARRO = \" + codigoparroquia;\r\n      zoomP.outSpatialReference = new SpatialReference(102100);\r\n\r\n      myquerytaskP.execute(zoomP, lang.hitch(this, function(evt1){\r\n\r\n        console.log(evt1);\r\n\r\n        if (evt1.features.length >0){\r\n\r\n          var myparroquia = evt1.features[0].geometry;\r\n\r\n          var simbolop = new SimpleFillSymbol();\r\n\r\n          var grafico2 = new Graphic(myparroquia, simbolop);\r\n          // this.map.graphics.clear();\r\n          this.map.graphics.add(grafico2);\r\n          this.map.setExtent(myparroquia.getExtent(), true);\r\n\r\n        }\r\n\r\n      }))\r\n\r\n    },\r\n\r\n    // startup: function() {\r\n    //   this.inherited(arguments);\r\n    //   console.log('Xunta::startup');\r\n    // },\r\n\r\n    // onOpen: function(){\r\n    //   console.log('Xunta::onOpen');\r\n    // },\r\n\r\n    // onClose: function(){\r\n    //   console.log('Xunta::onClose');\r\n    // },\r\n\r\n    // onMinimize: function(){\r\n    //   console.log('Xunta::onMinimize');\r\n    // },\r\n\r\n    // onMaximize: function(){\r\n    //   console.log('Xunta::onMaximize');\r\n    // },\r\n\r\n    // onSignIn: function(credential){\r\n    //   console.log('Xunta::onSignIn', credential);\r\n    // },\r\n\r\n    // onSignOut: function(){\r\n    //   console.log('Xunta::onSignOut');\r\n    // }\r\n\r\n    // onPositionChange: function(){\r\n    //   console.log('Xunta::onPositionChange');\r\n    // },\r\n\r\n    // resize: function(){\r\n    //   console.log('Xunta::resize');\r\n    // }\r\n\r\n    //methods to communication between widgets:\r\n\r\n  });\r\n\r\n});\r\n"]}